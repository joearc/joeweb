<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>藝術家大挑戰</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700;900&display=swap" rel="stylesheet">
   
<style>
/* ─── 極簡粉色系 ─── */
:root {
 --bg: #fffafa;
 --panel: #ffffff;
 --soft: #ffe4e6;
 --line: #fecdd3;
 --accent: #fb7185;
 --accent-dark: #f43f5e;
 --text: #4c0519;
 --text-light: #9f1239;
 --shadow: 0 10px 40px rgba(251, 113, 133, 0.1);
}

body {
 font-family: "Noto Sans TC", sans-serif;
 background: var(--bg);
 color: var(--text);
 display: flex;
 flex-direction: column;
 align-items: center;
 min-height: 100vh;
 margin: 0;
 transition: background-color 0.5s ease;
}

/* 導覽列 */
.global-nav {
 background: rgba(255, 255, 255, 0.8);
 backdrop-filter: blur(10px);
 border-bottom: 1px solid var(--line);
 padding: 1rem 2rem;
 position: sticky;
 top: 0;
 z-index: 100;
 width: 100%;
}

.global-nav ul {
 display: flex;
 gap: 2.5rem;
 list-style: none;
 margin: 0 auto;
 max-width: 1000px;
 justify-content: center;
}

.global-nav a {
 color: var(--text-light);
 text-decoration: none;
 font-weight: 500;
 font-size: 0.95rem;
 letter-spacing: 0.05em;
 transition: all 0.3s ease;
 position: relative;
}

.global-nav a::after {
 content: '';
 position: absolute;
 bottom: -4px;
 left: 0;
 width: 0;
 height: 2px;
 background: var(--accent);
 transition: width 0.3s ease;
}

.global-nav a:hover::after, .global-nav a.active::after {
 width: 100%;
}

/* 視覺面板 */
.glass-panel {
 background: var(--panel);
 border: 1px solid var(--line);
 box-shadow: var(--shadow);
 border-radius: 24px;
 transition: transform 0.3s ease;
}

.streetview-container {
 aspect-ratio: 16/10;
 border-radius: 20px;
 background: var(--soft);
 border: 1px solid var(--line);
 overflow: hidden;
 position: relative;
 box-shadow: inset 0 2px 10px rgba(0,0,0,0.02);
}

.streetview-img {
 width: 100%;
 height: 100%;
 object-fit: cover;
 transition: opacity 0.5s ease;
}

/* 按鈕 */
.btn-primary {
 background: var(--accent) !important;
 color: white !important;
 border-radius: 16px;
 border: none;
 cursor: pointer;
 transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.btn-primary:hover {
 background: var(--accent-dark) !important;
 transform: translateY(-2px);
 box-shadow: 0 8px 20px rgba(244, 63, 94, 0.3);
}

.btn-primary:active {
 transform: translateY(0);
}

.option-btn {
 background: var(--panel);
 border: 1px solid var(--line);
 border-radius: 16px;
 padding: 1.25rem;
 text-align: left;
 font-weight: 500;
 color: var(--text-light);
 transition: all 0.2s ease;
 cursor: pointer;
}

.option-btn:hover {
 border-color: var(--accent);
 background: var(--soft);
 transform: translateX(4px);
}

/* 狀態標籤 */
.label-caps {
 font-size: 0.7rem;
 font-weight: 700;
 text-transform: uppercase;
 letter-spacing: 0.1em;
 color: var(--accent);
 margin-bottom: 0.25rem;
}

/* 計時器 */
#timer-bar {
 transition: width 1s linear, background-color 0.3s ease;
 border-radius: 10px;
}

/* 動畫 */
@keyframes shake {
 0%, 100% { transform: translateX(0); }
 25% { transform: translateX(-5px); }
 75% { transform: translateX(5px); }
}

.wrong-shake {
 animation: shake 0.4s ease-in-out 3;
 border-color: #f43f5e !important;
}

.fade-in {
 animation: fadeIn 0.5s ease-out forwards;
}

@keyframes fadeIn {
 from { opacity: 0; transform: translateY(10px); }
 to { opacity: 1; transform: translateY(0); }
}

/* 覆蓋 Tailwind */
.text-primary { color: var(--accent) !important; }
.bg-primary { background: var(--accent) !important; }
.bg-secondary { background: var(--soft) !important; }
.border-primary { border-color: var(--line) !important; }
.text-secondary { color: var(--text-light) !important; }

</style>
</head>
    
<body class="p-6 md:p-12">
    <!-- 全域導覽列 -->
    <div id="nav" class="w-full mb-12"></div>

    <script>
      // 模擬導覽列，如果 nav.html 不存在則顯示預設
      fetch("./nav.html")
        
    </script>

    <!-- 開始畫面 -->
    <div id="start-screen" class="text-center glass-panel p-12 max-w-md w-full fade-in">
        <div class="w-20 h-20 bg-soft rounded-full flex items-center justify-center mx-auto mb-6">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" />
            </svg>
        </div>
        <h1 class="text-3xl font-black mb-3 text-primary tracking-tight">藝術家大挑戰</h1>
        <p class="mb-10 text-secondary font-medium">挑戰你的美術知識，探索藝術之美</p>
        <button onclick="startGame()" class="w-full btn-primary py-4 text-lg font-bold shadow-lg">開始探索</button>
    </div>

    <!-- 遊戲畫面 -->
    <div id="game-screen" class="hidden w-full max-w-3xl fade-in">
        <div class="mb-8 flex justify-between items-end px-2">
            <div>
                <div class="label-caps">Progress</div>
                <div class="text-3xl font-black text-text"><span id="current-q">1</span><span class="text-soft mx-1">/</span>10</div>
            </div>
            <div class="text-right">
                <div class="label-caps">Score</div>
                <div id="score-display" class="text-4xl font-black text-primary">0</div>
            </div>
        </div>
        
        <div id="timer-container" class="w-full bg-soft h-3 rounded-full mb-8 overflow-hidden p-0.5">
            <div id="timer-bar" class="h-full bg-primary" style="width: 100%"></div>
        </div>

        <div id="view-container" class="streetview-container mb-8 glass-panel">
            <img id="street-img" src="" class="streetview-img opacity-0">
            <div id="loader" class="absolute inset-0 flex flex-col items-center justify-center bg-white">
                <div class="w-10 h-10 border-4 border-soft border-t-accent rounded-full animate-spin"></div>
            </div>
            <div id="fallback-clue" class="absolute inset-0 hidden flex flex-col items-center justify-center bg-white/90 p-8 text-center backdrop-blur-sm">
                <p class="text-primary text-xl font-bold mb-2">觀察特徵</p>
                <p id="clue-text" class="text-secondary text-lg italic"></p>
            </div>
        </div>

        <div id="options-grid" class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <!-- 按鈕會由 JS 動態生成 -->
        </div>
    </div>

    <!-- 結果畫面 -->
    <div id="result-screen" class="hidden w-full max-w-md glass-panel p-12 text-center fade-in">
        <div class="label-caps mb-2">Test Completed</div>
        <h2 class="text-xl font-bold text-secondary mb-6">最終得分</h2>
        <div id="final-score" class="text-8xl font-black text-primary mb-12 tabular-nums">0</div>
        <button onclick="location.reload()" class="w-full btn-primary py-4 text-lg font-bold shadow-xl">再次挑戰</button>
    </div>

    <script>
const QUESTIONS_CONFIG = [
  {
    q: "1 這是哪位藝術家？",
    options: ["塞尚", "高更", "馬蒂斯", "畢卡索"],
    ansIndex: 1,
    img: "./img_art/001.jpg"
  },
  {
    q: "2 這是哪位藝術家？",
    options: ["林風眠", "徐悲鴻", "吳冠中", "齊白石"],
    ansIndex: 2,
    img: "./img_art/002.jpg"
  },
  {
    q: "3 這是哪位藝術家？",
    options: ["莫內", "雷諾瓦", "梵谷", "高更"],
    ansIndex: 2,
    img: "./img_art/003.jpg"
  },
  {
    q: "4 這是哪位藝術家？",
    options: ["高更", "塞尚", "畢卡索", "米羅"],
    ansIndex: 1,
    img: "./img_art/004.jpg"
  },
  {
    q: "5 這是哪位藝術家？",
    options: ["德加", "馬奈", "莫內", "雷諾瓦"],
    ansIndex: 1,
    img: "./img_art/005.jpg"
  },
  {
    q: "6 這是哪位藝術家？",
    options: ["莫內", "塞尚", "雷諾瓦", "西斯里"],
    ansIndex: 0,
    img: "./img_art/006.jpg"
  },
  {
    q: "7 這是哪位藝術家？",
    options: ["竇加", "羅特列克", "馬奈", "莫內"],
    ansIndex: 0,
    img: "./img_art/007.jpg"
  },
  {
    q: "8 這是哪位藝術家？",
    options: ["李梅樹", "陳澄波", "廖繼春", "林玉山"],
    ansIndex: 2,
    img: "./img_art/008.jpg"
  },
  {
    q: "9 這是哪位藝術家？",
    options: ["羅特列克", "竇加", "薩金特", "高更"],
    ansIndex: 0,
    img: "./img_art/009.jpg"
  },
  {
    q: "10 這是哪位藝術家？",
    options: ["莫內", "索羅拉", "德拉克洛瓦", "薩金特"],
    ansIndex: 1,
    img: "./img_art/010.jpg"
  }
];

        let currentIdx = 0;
        let score = 0;
        let timer;
        let timeLeft = 10;
        let canAnswer = true;

        function startGame() {
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('game-screen').classList.remove('hidden');
            loadQuestion();
        }

        async function loadQuestion() {
            if (currentIdx >= QUESTIONS_CONFIG.length) {
                showResults();
                return;
            }

            canAnswer = true;
            timeLeft = 10;
            document.getElementById('current-q').innerText = currentIdx + 1;
            
            const streetImg = document.getElementById('street-img');
            const loader = document.getElementById('loader');
            const fallbackClue = document.getElementById('fallback-clue');
            const timerBar = document.getElementById('timer-bar');

            streetImg.onload = null;
            streetImg.onerror = null;
            streetImg.src = ""; 
            streetImg.classList.add('opacity-0');
            
            loader.classList.remove('hidden');
            fallbackClue.classList.add('hidden');
            timerBar.style.width = "100%";
            timerBar.style.backgroundColor = "var(--accent)";
            
            const qData = QUESTIONS_CONFIG[currentIdx];
            
            streetImg.onload = () => {
                loader.classList.add('hidden');
                streetImg.classList.remove('opacity-0');
            };
            streetImg.onerror = () => {
                loader.classList.add('hidden');
                fallbackClue.classList.remove('hidden');
                document.getElementById('clue-text').innerText = qData.q;
            };

            streetImg.src = qData.img;

            const grid = document.getElementById('options-grid');
            grid.innerHTML = '';
            const originalAns = qData.options[qData.ansIndex];
            
            [...qData.options].sort(() => Math.random() - 0.5).forEach(opt => {
                const btn = document.createElement('button');
                btn.className = "option-btn";
                btn.innerText = opt;
                btn.onclick = () => handleAnswer(opt, originalAns, btn);
                grid.appendChild(btn);
            });

            startTimer();
        }

        function startTimer() {
            clearInterval(timer);
            timer = setInterval(() => {
                timeLeft--;
                const timerBar = document.getElementById('timer-bar');
                timerBar.style.width = (timeLeft * 10) + "%";
                
                if (timeLeft <= 3) {
                    timerBar.style.backgroundColor = "#f43f5e";
                }

                if (timeLeft <= 0) {
                    handleAnswer(null, QUESTIONS_CONFIG[currentIdx].options[QUESTIONS_CONFIG[currentIdx].ansIndex]);
                }
            }, 1000);
        }

        function handleAnswer(selected, correctAnswer, btn) {
            if (!canAnswer) return;
            canAnswer = false;
            clearInterval(timer);

            const isCorrect = selected === correctAnswer;

            if (isCorrect) {
                score += 10;
                document.getElementById('score-display').innerText = score;
                if (btn) {
                    btn.classList.add('!bg-emerald-500', '!border-emerald-400', '!text-white', '!transform-none');
                }
            } else {
                document.getElementById('view-container').classList.add('wrong-shake');
                if (btn) {
                    btn.classList.add('!bg-rose-500', '!border-rose-400', '!text-white', '!transform-none');
                }
                Array.from(document.getElementById('options-grid').children).forEach(b => {
                    if (b.innerText === correctAnswer) {
                        b.classList.add('!border-emerald-500', '!text-emerald-600', 'border-2');
                    }
                });
            }

            setTimeout(() => {
                document.getElementById('view-container').classList.remove('wrong-shake');
                currentIdx++;
                loadQuestion();
            }, 1500);
        }

        function showResults() {
            document.getElementById('game-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');
            document.getElementById('final-score').innerText = score;
        }
    </script>
</body>
</html>
