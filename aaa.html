<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>台藝術家大挑戰</title>
    <script src="https://cdn.tailwindcss.com"></script>
   
<style>
/* ─── 藝術館風格配色 ─── */
:root {
 --bg:#f8f5f0;
 --panel:#ffffff;
 --soft:#e9e1d3;
 --line:#d4c7b0;
 --accent:#8a6d4d;
 --accent-dark:#634a32;
 --text:#3d3224;
 --shadow:0 8px 24px rgba(0,0,0,.06);
 --correct: #4a7c51;
 --wrong: #a14c4c;
}

/* 導覽列 */
.global-nav{
 background:var(--panel);
 border-bottom:1px solid var(--soft);
 padding:1rem 2rem;
 position:sticky;top:0;z-index:100;
 box-shadow:var(--shadow);
}
.global-nav ul{display:flex;gap:2rem;list-style:none;margin:0 auto;max-width:1200px}
.global-nav a{
 color:var(--accent);text-decoration:none;font-weight:600;
 border-bottom:2px solid transparent;padding-bottom:4px;
 transition:.3s;
}
.global-nav a:hover{border-bottom:2px solid var(--accent)}
.global-nav a.active{border-bottom:2px solid var(--accent-dark)}

body{
 font-family:"Noto Sans TC",sans-serif;
 background:var(--bg);
 color:var(--text);
 display:flex;flex-direction:column;align-items:center;
 min-height:100vh;
 margin:0;
 padding:0;
}

/* 視覺容器 - 藝術品風格 */
.glass-panel{
 background:rgba(255,255,255,.95);
 border:1px solid var(--line);
 box-shadow:var(--shadow);
 transition: transform 0.3s ease;
}
.glass-panel:hover{
 transform: translateY(-2px);
}

.streetview-container{
 aspect-ratio:3/2; /* 藝術品常見比例 */
 border-radius:12px;
 background:var(--soft);
 border:1px solid var(--line);
 overflow:hidden;
 position:relative;
}

/* 按鈕樣式 */
.btn-primary{
 background:var(--accent)!important;
 color:white!important;
 border-radius:12px;
 transition: all 0.3s ease;
}
.btn-primary:hover{
 background:var(--accent-dark)!important;
 transform: translateY(-2px);
}
.btn-primary:active{
 transform: translateY(1px);
}

/* 選項按鈕 */
.option-btn {
 background:var(--soft);
 border:1px solid var(--line);
 transition: all 0.3s ease;
}
.option-btn:hover {
 background:var(--line);
 transform: translateX(4px);
}

/* 狀態顏色 */
.correct {
 background:var(--correct)!important;
 border-color:var(--correct)!important;
 color:white!important;
}
.wrong {
 background:var(--wrong)!important;
 border-color:var(--wrong)!important;
 color:white!important;
}
.highlight {
 border:2px solid var(--correct)!important;
 color:var(--correct)!important;
 font-weight:bold;
}

/* 動畫效果 */
#timer-bar{transition:width 1s linear}
@keyframes shake { 
 0%, 100% { transform: translateX(0); } 
 25% { transform: translateX(-8px); } 
 75% { transform: translateX(8px); } 
}
.wrong-shake { 
 animation: shake 0.4s ease-in-out; 
}
.fade-in {
 animation: fadeIn 0.5s ease-in;
}
@keyframes fadeIn {
 from { opacity:0; }
 to { opacity:1; }
}
</style>
</head>
    
    
<body class="p-4">
    <!-- 全域導覽列 -->
<div id="nav"></div>

<script>
  fetch("./nav.html")
    .then(r => r.text())
    .then(html => document.getElementById("nav").innerHTML = html);
</script>


    <div id="start-screen" class="text-center glass-panel p-10 rounded-3xl max-w-lg w-full mt-8">
        <h1 class="text-4xl font-black mb-2 text-primary italic">藝術家大挑戰</h1>
        <p class="mb-10 text-secondary">挑戰你的美術知識！每題 10 分，滿分 100。</p>
        <button onclick="startGame()" class="w-full btn-primary px-8 py-4 rounded-xl font-black text-xl shadow-lg">開始遊戲</button>
    </div>

    <div id="game-screen" class="hidden w-full max-w-4xl mt-8">
        <div class="mb-4 flex justify-between items-end">
            <div>
                <span class="text-secondary text-xs font-bold uppercase">題目進度</span>
                <div class="text-2xl font-black text-secondary"><span id="current-q">1</span> / 10</div>
            </div>
            <div class="text-right">
                <span class="text-secondary text-xs font-bold uppercase">當前分數</span>
                <div id="score-display" class="text-3xl font-black text-primary">0</div>
            </div>
        </div>
        
        <div id="timer-container" class="w-full bg-secondary h-2 rounded-full mb-6 overflow-hidden">
            <div id="timer-bar" class="timer-bar h-full bg-primary" style="width: 100%"></div>
        </div>

        <div id="view-container" class="streetview-container mb-6 border border-primary">
            <img id="street-img" src="" class="streetview-img opacity-0 fade-in">
            <div id="loader" class="absolute inset-0 flex flex-col items-center justify-center bg-soft">
                <div class="w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin mb-4"></div>
                <p class="text-primary">載入藝術作品中...</p>
            </div>
            <div id="fallback-clue" class="absolute inset-0 hidden flex flex-col items-center justify-center bg-soft/90 p-8 text-center backdrop-blur-sm">
                <p class="text-primary text-xl font-bold mb-2">作品特徵</p>
                <p id="clue-text" class="text-secondary text-lg italic"></p>
            </div>
        </div>

        <div id="options-grid" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
    </div>

    <div id="result-screen" class="hidden w-full max-w-lg glass-panel p-10 rounded-3xl text-center border-2 border-primary/30 mt-8">
        <h2 class="text-2xl font-bold text-secondary mb-2 uppercase tracking-tighter">挑戰完成</h2>
        <p class="text-secondary">你的最終成績</p>
        <div id="final-score" class="text-8xl font-black text-primary mb-10">0</div>
        <button onclick="location.reload()" class="w-full btn-primary px-8 py-4 rounded-xl font-black text-lg shadow-xl">重新挑戰</button>
    </div>

    <script>
const QUESTIONS_CONFIG = [
  {
    q: "1 這是哪位藝術家？",
    options: ["塞尚", "高更", "馬蒂斯", "畢卡索"],
    ansIndex: 1,
    img: "./img_art/001.jpg"
  },
  {
    q: "2 這是哪位藝術家？",
    options: ["林風眠", "徐悲鴻", "吳冠中", "齊白石"],
    ansIndex: 2,
    img: "./img_art/002.jpg"
  },
  {
    q: "3 這是哪位藝術家？",
    options: ["莫內", "雷諾瓦", "梵谷", "高更"],
    ansIndex: 2,
    img: "./img_art/003.jpg"
  },
  {
    q: "4 這是哪位藝術家？",
    options: ["高更", "塞尚", "畢卡索", "米羅"],
    ansIndex: 1,
    img: "./img_art/004.jpg"
  },
  {
    q: "5 這是哪位藝術家？",
    options: ["德加", "馬奈", "莫內", "雷諾瓦"],
    ansIndex: 1,
    img: "./img_art/005.jpg"
  },
  {
    q: "6 這是哪位藝術家？",
    options: ["莫內", "塞尚", "雷諾瓦", "西斯里"],
    ansIndex: 0,
    img: "./img_art/006.jpg"
  },
  {
    q: "7 這是哪位藝術家？",
    options: ["竇加", "羅特列克", "馬奈", "莫內"],
    ansIndex: 0,
    img: "./img_art/007.jpg"
  },
  {
    q: "8 這是哪位藝術家？",
    options: ["李梅樹", "陳澄波", "廖繼春", "林玉山"],
    ansIndex: 2,
    img: "./img_art/008.jpg"
  },
  {
    q: "9 這是哪位藝術家？",
    options: ["羅特列克", "竇加", "馬奈", "高更"],
    ansIndex: 0,
    img: "./img_art/009.jpg"
  },
  {
    q: "10 這是哪位藝術家？",
    options: ["莫內", "索羅拉", "雷諾瓦", "高更"],
    ansIndex: 1,
    img: "./img_art/010.jpg"
  }
];

        let currentIdx = 0;
        let score = 0;
        let timer;
        let timeLeft = 10;
        let canAnswer = true;

        function startGame() {
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('game-screen').classList.remove('hidden');
            loadQuestion();
        }

        async function loadQuestion() {
            if (currentIdx >= QUESTIONS_CONFIG.length) {
                showResults();
                return;
            }

            canAnswer = true;
            timeLeft = 10;
            document.getElementById('current-q').innerText = currentIdx + 1;
            
            const streetImg = document.getElementById('street-img');
            const loader = document.getElementById('loader');
            const fallbackClue = document.getElementById('fallback-clue');
            const timerBar = document.getElementById('timer-bar');

            streetImg.onload = null;
            streetImg.onerror = null;
            streetImg.src = ""; 
            streetImg.classList.add('opacity-0');
            
            loader.classList.remove('hidden');
            fallbackClue.classList.add('hidden');
            timerBar.style.width = "100%";
            
            const qData = QUESTIONS_CONFIG[currentIdx];
            
            streetImg.onload = () => {
                loader.classList.add('hidden');
                streetImg.classList.remove('opacity-0');
            };
            streetImg.onerror = () => {
                loader.classList.add('hidden');
                fallbackClue.classList.remove('hidden');
                document.getElementById('clue-text').innerText = qData.q;
            };

            streetImg.src = qData.img;

            const grid = document.getElementById('options-grid');
            grid.innerHTML = '';
            const originalAns = qData.options[qData.ansIndex];
            
            [...qData.options].sort(() => Math.random() - 0.5).forEach(opt => {
                const btn = document.createElement('button');
                btn.className = "option-btn p-4 rounded-xl border border-primary text-left font-bold text-secondary";
                btn.innerText = opt;
                btn.onclick = () => handleAnswer(opt, originalAns, btn);
                grid.appendChild(btn);
            });

            startTimer();
        }

        function startTimer() {
            clearInterval(timer);
            timer = setInterval(() => {
                timeLeft--;
                document.getElementById('timer-bar').style.width = (timeLeft * 10) + "%";
                if (timeLeft <= 0) handleAnswer(null, QUESTIONS_CONFIG[currentIdx].options[QUESTIONS_CONFIG[currentIdx].ansIndex]);
            }, 1000);
        }

        function handleAnswer(selected, correctAnswer, btn) {
            if (!canAnswer) return;
            canAnswer = false;
            clearInterval(timer);

            const isCorrect = selected === correctAnswer;

            if (isCorrect) {
                score += 10;
                document.getElementById('score-display').innerText = score;
                if (btn) btn.classList.add('correct');
            } else {
                document.getElementById('view-container').classList.add('wrong-shake');
                if (btn) btn.classList.add('wrong');
                Array.from(document.getElementById('options-grid').children).forEach(b => {
                    if (b.innerText === correctAnswer) b.classList.add('highlight');
                });
            }

            setTimeout(() => {
                document.getElementById('view-container').classList.remove('wrong-shake');
                currentIdx++;
                loadQuestion();
            }, 1500);
        }

        function showResults() {
            document.getElementById('game-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');
            document.getElementById('final-score').innerText = score;
        }
    </script>
</body>
</html>